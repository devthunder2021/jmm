---
import { Icon } from "astro-icon/components";
---

<button
  id="darkToggle"
  class="rounded-full
    h-8
    w-8
    cursor-pointer
    flex
    items-center
    justify-center
    z-50"
  x-on:click="darkMode = (darkMode == 'dark') ? 'light' : 'dark'"
>
  <!-- Dark Mode -->
  <Icon
    name="ph--moon-stars-duotone"
    width={32}
    height={32}
    x-cloak
    x-show.transition="darkMode === 'dark'"
  />
  <!-- Light Mode -->
  <Icon
    name="ph--sun-duotone"
    width={32}
    height={32}
    x-cloak
    x-show.transition="darkMode !== 'dark'"
  />
</button>

<script is:inline>
  if (localStorage.getItem("darkMode") === "dark") {
    document.querySelector("html").dataset.theme = "dark";
  }
  if (localStorage.getItem("darkMode") === "light") {
    document.querySelector("html").dataset.theme = "light";
  }
  if (!localStorage.getItem("darkMode")) {
    let theme = window.matchMedia("(prefers-color-scheme: dark)")
      ? "dark"
      : "light";
    localStorage.setItem("darkMode", theme);
  }
</script>
